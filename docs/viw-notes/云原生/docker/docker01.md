
<!-- TOC -->

- [docker](#docker)
    - [1. docker是什么](#1-docker是什么)
    - [2. docker为什么出现](#2-docker为什么出现)
    - [3. docker的架构图](#3-docker的架构图)
    - [4. 和传统虚拟机的区别](#4-和传统虚拟机的区别)
        - [虚拟机：](#虚拟机)
        - [docker](#docker)
        - [区别](#区别)
        - [为什么docker比虚拟机快](#为什么docker比虚拟机快)
    - [5. 为什么要用docker](#5-为什么要用docker)
    - [6. devops开发工程师](#6-devops开发工程师)
- [docker基本概念](#docker基本概念)
    - [三个基本概念](#三个基本概念)
        - [镜像](#镜像)
        - [容器](#容器)
        - [仓库](#仓库)
    - [架构](#架构)
- [docker安装](#docker安装)

<!-- /TOC -->


# docker

## 1. docker是什么



Docker 是一个用于开发、发布和运行应用程序的开放平台。 Docker 使您能够将应用程序与基础架构分离，以便您可以快速交付软件。使用 Docker，您可以像管理应用程序一样管理基础设施。通过利用 Docker 快速交付、测试和部署代码的方法，您可以显着减少编写代码和在生产中运行之间的延迟。

最开始 docker是google基于Linux用go写的，可以对进程进行封装隔离。隔离的进程独立于宿主和其它的隔离的进程，也称其为容器。





## 2. docker为什么出现


RD可以利用 Docker 可以消除协作编码时“在我的机器上可正常工作”的问题，实现 一次镜像，处处运行

透过镜像(images)将作业系统核心除外，运作应用程式所需要的系统环境，由下而上打包，达到应用程式跨平台间的无缝接轨运作。

RD只需要关系写代码，告诉OP系统运行环境，让OP去维护和部署即可

现在我们公司都是k8s+docker，开发只需要在把对应的分支部署到对应的泳道既可，这个泳道也要有着系统的上下游系统


## 3.docker的架构图



![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826005118.png)



## 4.和传统虚拟机的区别

### 虚拟机：
它可以在一种操作系统里面运行另一种操作系统，比如在Windows10系统里面运行Linux系统CentOS7。应用程序对此毫无感知，因为虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响。这类虚拟机完美的运行了另一套系统，能够使应用程序，操作系统和硬件三者之间的逻辑不变。 

**虚拟机的缺点**
- 1    资源占用多 
- 2    冗余步骤多
- 3    启动慢

![](docker01/imgs/2022-08-26-00-54-56.png)


> 说简单点就是，有了虚拟机，你就可以在mac上跑Windows系统，这个系统对于mac来说 就是个应用

### docker

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826010014.png)


### 区别

传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；而容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826005950.png)

### 为什么docker比虚拟机快

docker利用的是宿主机的内核,而不需要加载操作系统OS内核

当新建一个容器时,docker不需要和虚拟机一样重新加载一个操作系统内核。进而避免引寻、加载操作系统内核返回等比较费时费资源的过程,当新建一个虚拟机时,虚拟机软件需要加载OS,返回新建过程是分钟级别的。而docker由于直接利用宿主机的操作系统,则省略了返回过程,因此新建一个docker容器只需要几秒钟。

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826012808.png)

## 5.为什么要用docker


- 1.更高效的利用系统资源
- 2.更快速的启动时间
- 3.一致的运行环境,由于开发环境、测试环境、生产环境不一致，导致有些 bug 并未在开发过程中被发现。而 Docker 的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性，从而不会再出现 「这段代码在我机器上没问题啊」 这类问题。
- 4.持续交付和自动部署
- 5.更轻松的迁移
- 6.更轻松的维护和扩展

## 6. devops开发工程师


...




# docker基本概念


## 三个基本概念

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826010905.png)

> 说简单点 就是 仓库就是这一只鲸鱼，镜像就是模板，模板创建出来的上面一个个的集装箱就是容器实例，有了模板，可以在A的电脑上创建redis实例，在B的电脑上创建一模一样的实例，容器就是来干活的

### 镜像

Docker 镜像 是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像 不包含 任何动态数据，其内容在构建之后也不会被改变。

> 说简单点就是 Docker 镜像（Image）就是一个只读的模板。镜像可以用来创建 Docker 容器，一个镜像可以创建很多容器。它也相当于是一个root文件系统。比如官方镜像 ubuntu:18.04 就包含了完整的一套 Ubuntu 18.04 最小系统的 root 文件系统。


### 容器

镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的 类 和 实例 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。

> 可以把容器看做是一个简易版的 Linux 环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。

### 仓库

镜像构建完成后，可以很容易的在当前宿主机上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。

一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 <仓库名>:<标签> 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。

仓库名经常以 两段式路径 形式出现，比如 aaa/redis，前者往往意味着 Docker Registry 多用户环境下的用户名，后者则往往是对应的软件名。但这并非绝对，取决于所使用的具体 Docker Registry 的软件或服务。


仓库分为公开仓库（Public）和私有仓库（Private）两种形式。

最大的公开仓库是 Docker Hub(https://hub.docker.com/)，

存放了数量庞大的镜像供用户下载。国内的公开仓库包括阿里云 、网易云等


## 架构

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826012116.png)

Docker 采用了 C/S 架构，包括客户端和服务端。Docker 守护进程 （Daemon）作为服务端接受来自客户端的请求，并处理这些请求（创建、运行、分发容器）。


Docker 守护进程一般在宿主主机后台运行，等待接收来自客户端的消息。
Docker 客户端则为用户提供一系列可执行命令，用户用这些命令实现跟 Docker 守护进程交互。

![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826012249.png)


# docker安装


> mac下直接安装 docker mac desktop


然后开启国内加速


![](https://xiaoboblog-bucket.oss-cn-hangzhou.aliyuncs.com/blog/20220826012524.png)






